<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Graficar Desigualdad</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: Arial; padding: 20px; }
    #graph { width: 100%; height: 500px; }
  </style>
</head>
<body>

  <h2>Graficador de desigualdades lineales</h2>
  <p>Ejemplo: <strong>y &lt;= 2*x + 3</strong></p>

  <input type="text" id="inequality" placeholder="Escribe una desigualdad..." size="30" />
  <button onclick="graficar()">Graficar</button>

  <div id="graph"></div>

  <script>
    function graficar() {
      const input = document.getElementById("inequality").value;
      const match = input.match(/y\s*([<>=]+)\s*(.+)/);

      if (!match) {
        alert("Desigualdad no válida. Usa formato: y <= 2*x + 3");
        return;
      }

      const operator = match[1].trim();
      const expr = match[2].trim();

      const x = [];
      const y = [];
      const xMin = -10, xMax = 10, step = 0.2;

      for (let i = xMin; i <= xMax; i += step) {
        x.push(i);
        try {
          y.push(eval(expr.replace(/x/g, i)));
        } catch (e) {
          alert("Error en la expresión.");
          return;
        }
      }

      const fillY = [];
      const fillX = [];

      for (let xi = xMin; xi <= xMax; xi += step) {
        for (let yi = -10; yi <= 10; yi += step) {
          let yEval = eval(expr.replace(/x/g, xi));
          let condition = false;

          switch (operator) {
            case "<": condition = yi < yEval; break;
            case "<=": condition = yi <= yEval; break;
            case ">": condition = yi > yEval; break;
            case ">=": condition = yi >= yEval; break;
            case "==": condition = yi == yEval; break;
          }

          if (condition) {
            fillX.push(xi);
            fillY.push(yi);
          }
        }
      }

      const traceLine = {
        x: x,
        y: y,
        mode: 'lines',
        name: 'Línea frontera',
        line: { color: 'blue' }
      };

      const traceRegion = {
        x: fillX,
        y: fillY,
        mode: 'markers',
        name: 'Región solución',
        marker: { color: 'rgba(0, 200, 0, 0.3)', size: 2 },
        type: 'scatter'
      };

      const layout = {
        title: 'Gráfico de Desigualdad',
        xaxis: { range: [xMin, xMax] },
        yaxis: { range: [-10, 10] }
      };

      Plotly.newPlot('graph', [traceRegion, traceLine], layout);
    }
  </script>

</body>
</html>
