<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Graficador de Desigualdades 3D</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #ffe6f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }
    h1 {
      color: #cc66a1;
      margin-bottom: 10px;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 5px;
      border-radius: 10px;
      border: 1px solid #ccc;
      width: 300px;
    }
    button {
      background-color: #f9b6d2;
      cursor: pointer;
    }
    #plot {
      width: 90vw;
      height: 80vh;
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1>Graficador de Desigualdades con 3 Variables</h1>
  <input type="text" id="ineq1" placeholder="Ej: x + y + z <= 10">
  <input type="text" id="ineq2" placeholder="Ej: x + y >= 2">
  <input type="text" id="ineq3" placeholder="Ej: z >= 0">
  <button onclick="graficar()">Graficar</button>

  <div id="plot"></div>

  <script>
    function parseInequality(input) {
      const match = input.match(/([+-]?\s*\d*x)?\s*([+-]?\s*\d*y)?\s*([+-]?\s*\d*z)?\s*(<=|>=|<|>|==)\s*(-?\d+)/i);
      if (!match) return null;

      function parseTerm(term, variable) {
        if (!term) return 0;
        term = term.replace(variable, '').replace(/\s+/g, '');
        if (term === '' || term === '+') return 1;
        if (term === '-') return -1;
        return parseFloat(term);
      }

      return {
        A: parseTerm(match[1], 'x'),
        B: parseTerm(match[2], 'y'),
        C: parseTerm(match[3], 'z'),
        op: match[4],
        D: parseFloat(match[5])
      };
    }

    function cumple({A, B, C, op, D}, x, y, z) {
      const val = A * x + B * y + C * z;
      switch(op) {
        case '<=': return val <= D;
        case '>=': return val >= D;
        case '<':  return val <  D;
        case '>':  return val >  D;
        case '==': return val === D;
        default: return false;
      }
    }

    function graficar() {
      const ineqs = [ineq1.value, ineq2.value, ineq3.value].map(parseInequality);

      if (ineqs.includes(null)) {
        alert("Asegúrate de usar el formato correcto: Ax + By + Cz <= D");
        return;
      }

      const puntos = { x: [], y: [], z: [] };

      for (let x = -10; x <= 10; x++) {
        for (let y = -10; y <= 10; y++) {
          for (let z = -10; z <= 10; z++) {
            if (ineqs.every(ineq => cumple(ineq, x, y, z))) {
              puntos.x.push(x);
              puntos.y.push(y);
              puntos.z.push(z);
            }
          }
        }
      }

      const trace = {
        x: puntos.x,
        y: puntos.y,
        z: puntos.z,
        mode: 'markers',
        type: 'scatter3d',
        marker: {
          size: 3,
          color: '#c7d8ff', // pastel azul/lila
          opacity: 0.7
        }
      };

      const layout = {
        title: 'Región solución de desigualdades 3D',
        margin: { l: 0, r: 0, b: 0, t: 30 },
        scene: {
          xaxis: { title: 'x' },
          yaxis: { title: 'y' },
          zaxis: { title: 'z' }
        }
      };

      Plotly.newPlot('plot', [trace], layout);
    }
  </script>

</body>
</html>

