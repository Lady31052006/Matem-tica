<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Graficador de Desigualdades 3D</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fbeaff;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h2 {
      color: #d48fce;
    }
    input, button {
      padding: 10px;
      font-size: 16px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    button {
      background-color: #f4c2f4;
      color: #333;
      cursor: pointer;
    }
    #plot {
      width: 90vw;
      height: 80vh;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>Graficador de Desigualdades con Tres Variables</h2>
  <input type="text" id="ineqInput" placeholder="Ej: x + y + z <= 10">
  <button onclick="graficar()">Graficar</button>
  <div id="plot"></div>

  <script>
    function graficar() {
      const input = document.getElementById("ineqInput").value;
      const match = input.match(/([+-]?\s*\d*x)?\s*([+-]?\s*\d*y)?\s*([+-]?\s*\d*z)?\s*(<=|>=|<|>|==)\s*(-?\d+)/i);
      if (!match) {
        alert("Formato inv√°lido. Use: Ax + By + Cz <= D");
        return;
      }

      // Extraer coeficientes
      const parseTerm = (term, variable) => {
        if (!term) return 0;
        term = term.replace(variable, '').trim();
        if (term === '' || term === '+') return 1;
        if (term === '-') return -1;
        return parseFloat(term);
      };

      const A = parseTerm(match[1], 'x');
      const B = parseTerm(match[2], 'y');
      const C = parseTerm(match[3], 'z');
      const op = match[4];
      const D = parseFloat(match[5]);

      // Crear puntos (x, y, z) que cumplen la desigualdad
      const puntos = { x: [], y: [], z: [] };
      for (let x = -10; x <= 10; x += 1) {
        for (let y = -10; y <= 10; y += 1) {
          for (let z = -10; z <= 10; z += 1) {
            const val = A * x + B * y + C * z;
            if (
              (op === '<=' && val <= D) ||
              (op === '>=' && val >= D) ||
              (op === '<'  && val <  D) ||
              (op === '>'  && val >  D) ||
              (op === '==' && val === D)
            ) {
              puntos.x.push(x);
              puntos.y.push(y);
              puntos.z.push(z);
            }
          }
        }
      }

      const trace = {
        x: puntos.x,
        y: puntos.y,
        z: puntos.z,
        mode: 'markers',
        type: 'scatter3d',
        marker: {
          size: 3,
          color: '#fbb1d0', // rosa pastel
          opacity: 0.6
        }
      };

      const layout = {
        margin: { l: 0, r: 0, b: 0, t: 0 },
        scene: {
          xaxis: { title: 'x' },
          yaxis: { title: 'y' },
          zaxis: { title: 'z' }
        }
      };

      Plotly.newPlot('plot', [trace], layout);
    }
  </script>
</body>
</html>

