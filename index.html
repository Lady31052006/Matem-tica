<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resolver Programaci√≥n Lineal</title>
  <style>
    body { font-family: Arial; background: #f5f5f5; padding: 20px; }
    .container { max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
    textarea, button { width: 100%; margin-top: 10px; padding: 10px; font-size: 16px; }
    canvas { margin-top: 20px; border: 1px solid #ccc; width: 100%; height: 400px; }
    pre { background: #eee; padding: 10px; white-space: pre-wrap; }
    h1 { color: #007bff; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîß Resolver Problema de Programaci√≥n Lineal</h1>
    <p>‚úçÔ∏è Escribe el problema as√≠ (formato estructurado):</p>
    <textarea id="entrada" rows="8" placeholder="Maximizar Z = 3U + 5H
Sujeto a:
25U + 50H <= 80000
0.5U + 0.25H <= 700
U <= 1000
U, H >= 0"></textarea>
    <button onclick="resolver()">Resolver</button>
    <pre id="salida">Esperando datos...</pre>
    <canvas id="grafico" width="600" height="400"></canvas>
  </div>

  <script>
    function parsearEntrada(texto) {
      const lineas = texto.split('\n').map(l => l.trim()).filter(l => l);
      const objetivo = lineas[0].match(/Z\s*=\s*([^\n]+)/i)[1];
      const restricciones = lineas.slice(2, -1);
      return { objetivo, restricciones };
    }

    function evaluarObjetivo(obj, u, h) {
      return eval(obj.replace(/U/g, `(${u})`).replace(/H/g, `(${h})`));
    }

    function evaluarRestricciones(restricciones, u, h) {
      return restricciones.every(r => {
        const [lhs, op, rhs] = r.split(/(<=|>=|=)/);
        const valLHS = eval(lhs.replace(/U/g, `(${u})`).replace(/H/g, `(${h})`));
        const valRHS = parseFloat(rhs);
        if (op === "<=") return valLHS <= valRHS;
        if (op === ">=") return valLHS >= valRHS;
        return valLHS === valRHS;
      });
    }

    function resolver() {
      const entrada = document.getElementById("entrada").value;
      const { objetivo, restricciones } = parsearEntrada(entrada);

      const puntos = [];
      for (let u = 0; u <= 1000; u += 1) {
        for (let h = 0; h <= 2000; h += 1) {
          if (evaluarRestricciones(restricciones, u, h)) {
            const z = evaluarObjetivo(objetivo, u, h);
            puntos.push({ u, h, z });
          }
        }
      }

      const optimo = puntos.reduce((a, b) => b.z > a.z ? b : a);
      document.getElementById("salida").textContent = `
‚úÖ Soluci√≥n √≥ptima:
U = ${optimo.u}
H = ${optimo.h}
Z m√°x = ${optimo.z.toFixed(2)}

üìå Restricciones activas:
${restricciones.map(r => {
  const [lhs, op, rhs] = r.split(/(<=|>=|=)/);
  const val = eval(lhs.replace(/U/g, `(${optimo.u})`).replace(/H/g, `(${optimo.h})`));
  const activo = Math.abs(val - parseFloat(rhs)) < 1e-2 ? "‚úÖ Activa" : "‚ûñ No activa";
  return `${r} ‚Üí LHS=${val.toFixed(2)} ‚Üí ${activo}`;
}).join('\n')}
      `.trim();

      graficar(optimo, puntos);
    }

    function graficar(optimo, puntos) {
      const canvas = document.getElementById("grafico");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const escalaX = 500 / 1200;
      const escalaY = 300 / 2000;

      // Ejes
      ctx.beginPath();
      ctx.moveTo(50, 350); ctx.lineTo(550, 350); // X
      ctx.moveTo(50, 350); ctx.lineTo(50, 50);   // Y
      ctx.stroke();

      // Regi√≥n factible
      ctx.fillStyle = "rgba(0,0,255,0.2)";
      puntos.forEach(p => {
        const x = 50 + p.u * escalaX;
        const y = 350 - p.h * escalaY;
        ctx.fillRect(x, y, 1, 1);
      });

      // Punto √≥ptimo
      const x = 50 + optimo.u * escalaX;
      const y = 350 - optimo.h * escalaY;
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(x, y, 5, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillStyle = "black";
      ctx.fillText(`√ìptimo (${optimo.u}, ${optimo.h})`, x + 10, y - 10);
    }
  </script>
</body>
</html>









