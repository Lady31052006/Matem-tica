<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Desigualdades 3 variables en 2D</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      background: #ffeef8;
      font-family: 'Segoe UI', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }
    h2 {
      color: #cc66a1;
    }
    input, button {
      margin: 5px;
      padding: 10px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid #ccc;
      width: 280px;
    }
    button {
      background-color: #f7b7da;
      cursor: pointer;
    }
    #plot {
      width: 600px;
      height: 600px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>Graficador 2D de Desigualdades con 3 Variables</h2>
  <input type="text" id="ineq" placeholder="Ej: x + y + z <= 10">
  <input type="number" id="zval" placeholder="Valor para z (ej: 0)" />
  <button onclick="graficar()">Graficar</button>
  <div id="plot"></div>

  <script>
    function parseInequality(input) {
      const match = input.match(/([+-]?\s*\d*x)?\s*([+-]?\s*\d*y)?\s*([+-]?\s*\d*z)?\s*(<=|>=|<|>|==)\s*(-?\d+)/i);
      if (!match) return null;
      const parseTerm = (term, varName) => {
        if (!term) return 0;
        term = term.replace(varName, '').replace(/\s+/g, '');
        if (term === '' || term === '+') return 1;
        if (term === '-') return -1;
        return parseFloat(term);
      };
      return {
        A: parseTerm(match[1], 'x'),
        B: parseTerm(match[2], 'y'),
        C: parseTerm(match[3], 'z'),
        op: match[4],
        D: parseFloat(match[5])
      };
    }

    function cumple2D({A, B, C, op, D}, x, y, z) {
      const val = A * x + B * y + C * z;
      switch (op) {
        case "<=": return val <= D;
        case ">=": return val >= D;
        case "<":  return val <  D;
        case ">":  return val >  D;
        case "==": return val === D;
        default: return false;
      }
    }

    function graficar() {
      const input = document.getElementById("ineq").value;
      const zval = parseFloat(document.getElementById("zval").value);
      const ineq = parseInequality(input);
      if (!ineq || isNaN(zval)) {
        alert("Escribe la desigualdad correctamente y el valor de z.");
        return;
      }

      const puntos = { x: [], y: [] };
      for (let x = -20; x <= 20; x += 0.5) {
        for (let y = -20; y <= 20; y += 0.5) {
          if (cumple2D(ineq, x, y, zval)) {
            puntos.x.push(x);
            puntos.y.push(y);
          }
        }
      }

      const trace = {
        x: puntos.x,
        y: puntos.y,
        mode: 'markers',
        type: 'scatter',
        marker: {
          color: '#f5a3d1',
          size: 4,
          opacity: 0.5
        }
      };

      const layout = {
        title: `SoluciÃ³n 2D para z = ${zval}`,
        xaxis: { title: 'x' },
        yaxis: { title: 'y' }
      };

      Plotly.newPlot('plot', [trace], layout);
    }
  </script>
</body>
</html>


